<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #Box {
            height: 300px;
            width: 300px;
        }

        #Box2 {
            height: 300px;
            width: 300px;
        }

        #maincont {
            text-align: center;
            
        }
        button{
            padding: 1%;
        }
    </style>
</head>

<body>
    <div id="maincont">
        <label for="lang">Please select a Lang</label>
        <select name="lang" id="Langs" onchange="getTheValu()"></select>
        <br>
        <br>
        <textarea id="Box" rows="10" cols="50">

        </textarea>
        <textarea id="Box2" rows="10" cols="50">

        </textarea>
        <br>
        <button onclick="getthevalu()">translate</button>
    </div>
</body>

</html>
<script>
    async function getlangs() {
        let res = await fetch(`https://libretranslate.de/languages`);
        let data = await res.json();
        appenddata(data);
    }
    getlangs();


    function appenddata(d) {
        let maindiv = document.getElementById(`Langs`);
        d.forEach((el) => {
            let opt = document.createElement(`option`);
            opt.value = el.code;
            opt.textContent = el.name;
            maindiv.append(opt);
        });
    }

    function getTheValu() {
        let val = document.getElementById(`Langs`).value;
        return val;
    }

    function getInput() {
        let log = document.getElementById("Box");
        return log.value;
    }
    let userinput = getInput();

    async function translate() {
        const res = await fetch("https://libretranslate.de/translate", {
            method: "POST",
            body: JSON.stringify({
                q: getInput(),
                source: "en",
                target: getTheValu(),
            }),
            headers: { "Content-Type": "application/json" },
        });

        let data = await res.json();
        let { translatedText } = data;
        appendres(translatedText);
    }

    function getthevalu() {
        let log = document.getElementById("Box");
        translate();
    }

    function appendres(data) {
        let trgt = document.getElementById(`Box2`);
        trgt.value = data;
    }


</script>